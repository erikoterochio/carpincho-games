<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CYTN5F1X5W"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-CYTN5F1X5W');
  </script>
  <meta charset="UTF-8" />
  <title>D√≠galo con M√≠mica ¬∑ Carpincho Games</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link rel="stylesheet" href="common-styles.css">
  <style>
    /* Estilos espec√≠ficos de M√≠mica */
    .app {
      max-width: 480px;
    }

    .btn-primary.btn-blue {
      background: var(--sky);
      border: 2px solid var(--sky);
    }

    .btn-primary.btn-blue:hover {
      background: #4a8dd4;
      box-shadow: 0 4px 12px rgba(88, 153, 226, 0.3);
    }

    .inline-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .movie-card {
      background: #ffffff;
      border-radius: 16px;
      padding: 40px 24px;
      text-align: center;
      border: 4px solid var(--pink);
      margin: 20px 0;
      box-shadow: 0 4px 12px rgba(255, 107, 107, 0.2);
    }

    .movie-title {
      font-size: 2rem;
      font-weight: 700;
      color: var(--indigo);
      line-height: 1.3;
      margin: 16px 0;
    }

    .timer {
      font-size: 4rem;
      font-weight: 700;
      text-align: center;
      color: var(--pink);
      margin: 24px 0;
      font-variant-numeric: tabular-nums;
    }

    .timer.warning {
      color: #f59e0b;
      animation: pulse 1s infinite;
    }

    .timer.critical {
      color: #ef4444;
      animation: pulse 0.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .scoreboard {
      margin: 20px 0;
    }

    .team-score {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background: #ffffff;
      border-radius: 12px;
      margin-bottom: 12px;
      border: 2px solid rgba(148, 163, 184, 0.3);
    }

    .team-score.active {
      border-color: var(--pink);
      background: #fff1f2;
    }

    .team-name {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--indigo);
    }

    .team-points {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--pink);
      font-variant-numeric: tabular-nums;
    }

    .score-controls {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .score-btn {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: 2px solid rgba(148, 163, 184, 0.3);
      background: #ffffff;
      font-size: 1.2rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .score-btn:hover {
      transform: scale(1.05);
    }

    .score-btn.plus {
      background: var(--pink);
      color: #ffffff;
      border-color: var(--pink);
    }

    .info-text.large {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--indigo);
    }

    .winner-box {
      background: linear-gradient(135deg, #fff1f2 0%, #ffe4e6 100%);
      border-radius: 16px;
      padding: 32px 24px;
      text-align: center;
      border: 4px solid var(--pink);
      margin: 20px 0;
    }

    .winner-box h2 {
      font-size: 1.8rem;
      color: var(--pink);
      margin-bottom: 16px;
    }

    .winner-box .team-name {
      font-size: 2.2rem;
      color: var(--indigo);
    }

    @media (max-width: 480px) {
      .movie-title {
        font-size: 1.6rem;
      }

      .timer {
        font-size: 3rem;
      }
    }
  </style>
</head>
<body>
  <div class="fixed-header">
    <div class="christmas-lights">
      <img src="gorro.png" alt="">
    </div>
    <div class="header-content">
      <div class="header-title">D√≠galo con M√≠mica</div>
      <a href="index.html" class="home-btn">‚Üê Inicio</a>
    </div>
  </div>

  <div class="container">
    <main class="app">
      <!-- PANTALLA 1: INICIO -->
      <div class="screen active" id="screen-home">
        <div class="content">
          <p class="intro-text">
            Actu√° pel√≠culas y series sin hablar.<br>
            ¬°Que tu equipo adivine antes de que se acabe el tiempo!
          </p>
          
          <div class="btn-group">
            <button class="btn btn-primary btn-blue" onclick="showScreen('screen-setup')">Jugar</button>
          </div>
        </div>
      </div>

      <!-- PANTALLA 2: CONFIGURACI√ìN -->
      <div class="screen" id="screen-setup">
        <div class="content">
          <form id="setup-form" onsubmit="startGame(event)">
            <div class="inline-group">
              <div class="form-group">
                <label>Equipos</label>
                <select id="team-count">
                  <option value="2" selected>2 equipos</option>
                  <option value="3">3 equipos</option>
                  <option value="4">4 equipos</option>
                  <option value="5">5 equipos</option>
                  <option value="6">6 equipos</option>
                </select>
              </div>

              <div class="form-group">
                <label>Tiempo por turno</label>
                <select id="time-limit">
                  <option value="30">30 seg</option>
                  <option value="45">45 seg</option>
                  <option value="60" selected>1 min</option>
                  <option value="90">1:30 min</option>
                  <option value="120">2 min</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label>Modo de juego</label>
              <select id="game-mode" onchange="toggleGameMode()">
                <option value="rounds" selected>Por rondas</option>
                <option value="points">Hasta X puntos</option>
              </select>
            </div>

            <div class="form-group" id="rounds-group">
              <label>N√∫mero de rondas</label>
              <input type="number" id="rounds-count" min="1" max="20" value="5" />
            </div>

            <div class="form-group" id="points-group" style="display:none;">
              <label>Puntos para ganar</label>
              <input type="number" id="points-goal" min="1" max="50" value="15" />
            </div>

            <div class="btn-group">
              <button type="submit" class="btn btn-primary btn-blue">Empezar Juego</button>
            </div>
          </form>
        </div>
      </div>

      <!-- PANTALLA 3: PREPARAR TURNO -->
      <div class="screen" id="screen-prepare">
        <div class="content">
          <p class="info-text">
            <span id="prepare-info">Ronda 1 de 5</span>
          </p>
          <p class="info-text large">Turno del <span id="current-team-name">Equipo 1</span></p>
          <p class="intro-text">
            Solo la persona que va a actuar debe tocar "Mostrar pel√≠cula".<br>
            Luego actu√° sin hablar mientras tu equipo intenta adivinar.
          </p>

          <div class="btn-group">
            <button class="btn btn-primary btn-blue" onclick="showMovie()">Mostrar pel√≠cula</button>
          </div>
        </div>
      </div>

      <!-- PANTALLA 4: MOSTRAR PEL√çCULA -->
      <div class="screen" id="screen-movie">
        <div class="content">
          <div class="movie-card">
            <div class="movie-title" id="movie-title">T√≠tulo de Pel√≠cula</div>
          </div>

          <p class="intro-text">Memoriz√° el t√≠tulo y empez√° a actuar cuando toques "Iniciar"</p>

          <div class="btn-group">
            <button class="btn btn-primary" onclick="startTimer()">Iniciar Cron√≥metro</button>
          </div>
        </div>
      </div>

      <!-- PANTALLA 5: JUGANDO (CON CRON√ìMETRO) -->
      <div class="screen" id="screen-playing">
        <div class="content">
          <p class="info-text large" id="playing-team-name">Equipo 1</p>
          <div class="timer" id="timer">01:00</div>

          <div class="btn-group">
            <button class="btn btn-primary" onclick="stopTimer(true)">¬°Adivinaron!</button>
            <button class="btn btn-secondary" onclick="stopTimer(false)">No adivinaron</button>
          </div>
        </div>
      </div>

      <!-- PANTALLA 6: MARCADOR -->
      <div class="screen" id="screen-scoreboard">
        <div class="content">
          <p class="info-text" id="score-info">Ronda 1 de 5</p>

          <div class="scoreboard" id="scoreboard-list">
            <!-- Los equipos se agregan din√°micamente -->
          </div>

          <div class="btn-group">
            <button class="btn btn-primary btn-blue" onclick="nextTurn()">Siguiente Turno</button>
          </div>
        </div>
      </div>

      <!-- PANTALLA 7: GANADOR -->
      <div class="screen" id="screen-winner">
        <div class="content">
          <div class="winner-box">
            <h2>üèÜ Ganador</h2>
            <div class="team-name" id="winner-name">Equipo 1</div>
            <p style="margin-top:16px;font-size:1.2rem;color:var(--muted);">
              <span id="winner-points">10</span> puntos
            </p>
          </div>

          <div class="scoreboard" id="final-scoreboard">
            <!-- Marcador final -->
          </div>

          <div class="btn-group" style="margin-top:20px;">
            <button class="btn btn-primary btn-blue" onclick="playAgain()">Jugar de nuevo</button>
            <button class="btn btn-secondary" onclick="showScreen('screen-home')">Volver al inicio</button>
          </div>
        </div>
      </div>

      <footer>
        <span>Carpincho Games ¬∑ D√≠galo con M√≠mica</span>
      </footer>
    </main>
  </div>

  <script>
    // Estado del juego
    const gameState = {
      teamCount: 2,
      teams: [],
      timeLimit: 60,
      gameMode: 'rounds',
      roundsCount: 5,
      pointsGoal: 15,
      currentRound: 1,
      currentTeam: 0,
      currentMovie: '',
      usedMovies: []
    };

    // Base de datos de pel√≠culas y series
    const movies = [
      // Pel√≠culas argentinas
      'El secreto de sus ojos', 'Relatos salvajes', 'Nueve Reinas', 'El hijo de la novia', 'La historia oficial',
      'Camila', 'La Patagonia rebelde', 'Tiempo de valientes', 'Un cuento chino', 'Esperando la carroza',
      'El clan', 'La noche de los l√°pices', 'La tregua', 'Plata dulce', 'Pizza, birra, faso',
      
      // Series argentinas
      'Casados con hijos', 'Los Simuladores', 'Okupas', 'El Marginal', 'Clave de sol',
      
      // Pel√≠culas cl√°sicas internacionales (1970-1989)
      'Star Wars', 'El Padrino', 'Rocky', 'Tibur√≥n', 'Alien', 'Terminator', 'E.T.', 
      'Volver al futuro', 'Los Cazafantasmas', 'Indiana Jones', 'Top Gun', 'Rambo',
      'La guerra de las galaxias', 'Superman', 'Batman', 'Scarface', 'Amadeus',
      
      // Pel√≠culas 1990s
      'Titanic', 'Matrix', 'Forrest Gump', 'El rey le√≥n', 'Toy Story', 'Jurassic Park',
      'Pulp Fiction', 'El silencio de los inocentes', 'Jumanji', 'La m√°scara',
      'Duro de matar', 'Speed', 'Misi√≥n imposible', 'Independence Day', 'Armageddon',
      'Gladiador', 'El sexto sentido', 'American Beauty', 'Belleza americana',
      
      // Pel√≠culas 2000s
      'El se√±or de los anillos', 'Harry Potter', 'Piratas del Caribe', 'Spider-Man',
      'Shrek', 'Buscando a Nemo', 'Los incre√≠bles', 'Batman inicia', 'El caballero oscuro',
      'Iron Man', 'Transformers', 'Avatar', 'Inception', 'Up', 'Wall-E', 'Ratatouille',
      'Los vengadores', 'El origen', 'Interestelar', 'Django sin cadenas',
      
      // Pel√≠culas 2010s-2020s
      'Frozen', 'Intensa-mente', 'Coco', 'Toy Story 4', 'Joker', 'Parasite', 'Par√°sitos',
      '1917', 'Dunkerque', 'Mad Max Furia en el camino', 'La La Land', 'Whiplash',
      'Bohemian Rhapsody', 'Rocketman', 'Deadpool', 'Logan', 'Black Panther',
      'Coco', 'Encanto', 'Moana', 'Zootopia', 'Big Hero 6', 'Ralph el demoledor',
      
      // Series internacionales populares
      'Game of Thrones', 'Breaking Bad', 'Friends', 'The Office', 'Stranger Things',
      'La casa de papel', 'Narcos', 'The Crown', 'Peaky Blinders', 'Sherlock',
      'The Walking Dead', 'Lost', 'Prison Break', 'How I Met Your Mother',
      'The Big Bang Theory', 'Modern Family', 'Grey\'s Anatomy', 'Suits',
      'The Mandalorian', 'Loki', 'WandaVision', 'The Witcher', 'Vikings',
      'Chernobyl', 'True Detective', 'Westworld', 'The Boys', 'Succession',
      
      // M√°s pel√≠culas variadas
      'La vida es bella', 'El pianista', 'Am√©lie', 'Slumdog Millionaire',
      'Gran Torino', 'Million Dollar Baby', 'Invictus', 'Cisne negro',
      'El discurso del rey', 'La teor√≠a del todo', 'El c√≥digo enigma',
      'Steve Jobs', 'La red social', 'Wolf of Wall Street', 'El lobo de Wall Street',
      'D√≠a de la independencia', 'Contacto', 'Gravity', 'Marte', 'Interstellar',
      'Blade Runner', 'Blade Runner 2049', 'Dune', 'Arrival', 'Her',
      'Fast and Furious', 'R√°pido y furioso', 'John Wick', 'Taken', 'B√∫squeda implacable',
      'Casino Royale', 'Skyfall', 'Spectre', 'Kingsman', 'At√≥mica', 'Baby Driver'
    ];

    let timerInterval = null;
    let timeLeft = 0;

    // Alternar modo de juego
    function toggleGameMode() {
      const mode = document.getElementById('game-mode').value;
      document.getElementById('rounds-group').style.display = mode === 'rounds' ? 'block' : 'none';
      document.getElementById('points-group').style.display = mode === 'points' ? 'block' : 'none';
    }

    // Navegaci√≥n entre pantallas
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(screenId).classList.add('active');
    }

    // Iniciar juego
    function startGame(event) {
      event.preventDefault();
      
      gameState.teamCount = parseInt(document.getElementById('team-count').value);
      gameState.timeLimit = parseInt(document.getElementById('time-limit').value);
      gameState.gameMode = document.getElementById('game-mode').value;
      gameState.roundsCount = parseInt(document.getElementById('rounds-count').value);
      gameState.pointsGoal = parseInt(document.getElementById('points-goal').value);
      
      // Inicializar equipos
      gameState.teams = [];
      for (let i = 0; i < gameState.teamCount; i++) {
        gameState.teams.push({
          name: `Equipo ${i + 1}`,
          points: 0
        });
      }
      
      gameState.currentRound = 1;
      gameState.currentTeam = 0;
      gameState.usedMovies = [];
      
      showPrepareTurn();
    }

    // Mostrar pantalla de preparaci√≥n
    function showPrepareTurn() {
      document.getElementById('current-team-name').textContent = gameState.teams[gameState.currentTeam].name;
      
      if (gameState.gameMode === 'rounds') {
        const totalTurns = gameState.roundsCount * gameState.teamCount;
        const currentTurn = (gameState.currentRound - 1) * gameState.teamCount + gameState.currentTeam + 1;
        document.getElementById('prepare-info').textContent = `Turno ${currentTurn} de ${totalTurns}`;
      } else {
        document.getElementById('prepare-info').textContent = `Jugando hasta ${gameState.pointsGoal} puntos`;
      }
      
      showScreen('screen-prepare');
    }

    // Elegir pel√≠cula aleatoria
    function getRandomMovie() {
      const availableMovies = movies.filter(m => !gameState.usedMovies.includes(m));
      
      if (availableMovies.length === 0) {
        gameState.usedMovies = [];
        return movies[Math.floor(Math.random() * movies.length)];
      }
      
      const movie = availableMovies[Math.floor(Math.random() * availableMovies.length)];
      gameState.usedMovies.push(movie);
      return movie;
    }

    // Mostrar pel√≠cula
    function showMovie() {
      gameState.currentMovie = getRandomMovie();
      document.getElementById('movie-title').textContent = gameState.currentMovie;
      showScreen('screen-movie');
    }

    // Iniciar cron√≥metro
    function startTimer() {
      timeLeft = gameState.timeLimit;
      updateTimerDisplay();
      document.getElementById('playing-team-name').textContent = gameState.teams[gameState.currentTeam].name;
      showScreen('screen-playing');
      
      if (timerInterval) clearInterval(timerInterval);
      
      timerInterval = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();
        
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          stopTimer(false);
        }
      }, 1000);
    }

    // Actualizar visualizaci√≥n del cron√≥metro
    function updateTimerDisplay() {
      const timerEl = document.getElementById('timer');
      const mins = Math.floor(timeLeft / 60);
      const secs = timeLeft % 60;
      timerEl.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      
      // Cambiar color seg√∫n tiempo restante
      timerEl.className = 'timer';
      if (timeLeft <= 10 && timeLeft > 5) {
        timerEl.classList.add('warning');
      } else if (timeLeft <= 5) {
        timerEl.classList.add('critical');
      }
    }

    // Detener cron√≥metro
    function stopTimer(correct) {
      if (timerInterval) clearInterval(timerInterval);
      
      if (correct) {
        gameState.teams[gameState.currentTeam].points++;
      }
      
      showScoreboard();
    }

    // Mostrar marcador
    function showScoreboard() {
      if (gameState.gameMode === 'rounds') {
        const totalTurns = gameState.roundsCount * gameState.teamCount;
        const currentTurn = (gameState.currentRound - 1) * gameState.teamCount + gameState.currentTeam + 1;
        document.getElementById('score-info').textContent = `Turno ${currentTurn} de ${totalTurns}`;
      } else {
        document.getElementById('score-info').textContent = `Jugando hasta ${gameState.pointsGoal} puntos`;
      }
      
      const scoreboard = document.getElementById('scoreboard-list');
      scoreboard.innerHTML = '';
      
      gameState.teams.forEach((team, index) => {
        const teamDiv = document.createElement('div');
        teamDiv.className = 'team-score';
        if (index === gameState.currentTeam) {
          teamDiv.classList.add('active');
        }
        teamDiv.innerHTML = `
          <span class="team-name">${team.name}</span>
          <span class="team-points">${team.points}</span>
        `;
        scoreboard.appendChild(teamDiv);
      });
      
      showScreen('screen-scoreboard');
    }

    // Siguiente turno
    function nextTurn() {
      // Verificar si alguien gan√≥ (modo puntos)
      if (gameState.gameMode === 'points') {
        const winner = gameState.teams.find(t => t.points >= gameState.pointsGoal);
        if (winner) {
          showWinner();
          return;
        }
      }
      
      gameState.currentTeam++;
      
      if (gameState.currentTeam >= gameState.teamCount) {
        gameState.currentTeam = 0;
        gameState.currentRound++;
        
        // Verificar si terminaron las rondas (modo rondas)
        if (gameState.gameMode === 'rounds' && gameState.currentRound > gameState.roundsCount) {
          showWinner();
          return;
        }
      }
      
      showPrepareTurn();
    }

    // Mostrar ganador
    function showWinner() {
      // Encontrar equipo con m√°s puntos
      let winnerTeam = gameState.teams[0];
      gameState.teams.forEach(team => {
        if (team.points > winnerTeam.points) {
          winnerTeam = team;
        }
      });
      
      document.getElementById('winner-name').textContent = winnerTeam.name;
      document.getElementById('winner-points').textContent = winnerTeam.points;
      
      // Mostrar marcador final ordenado
      const finalScoreboard = document.getElementById('final-scoreboard');
      finalScoreboard.innerHTML = '';
      
      const sortedTeams = [...gameState.teams].sort((a, b) => b.points - a.points);
      sortedTeams.forEach(team => {
        const teamDiv = document.createElement('div');
        teamDiv.className = 'team-score';
        teamDiv.innerHTML = `
          <span class="team-name">${team.name}</span>
          <span class="team-points">${team.points}</span>
        `;
        finalScoreboard.appendChild(teamDiv);
      });
      
      showScreen('screen-winner');
    }

    // Jugar de nuevo
    function playAgain() {
      showScreen('screen-setup');
    }

    // Inicializaci√≥n
    document.addEventListener('DOMContentLoaded', () => {
      toggleGameMode();
    });
  </script>
</body>
</html>
