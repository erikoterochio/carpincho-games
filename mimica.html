
1764982530772_image.png

<!DOCTYPE html> <html lang="es"> <head> <meta charset="UTF-8" /> <title>Anotador de Truco ¬∑ Carpincho Games</title> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> <style> :root { --bg: #E9E9E9;

pasted

Tengo este c√≥digo pero necesito que se parezca a la imagen, no est√° siendo como quiero.

Lo otro que quiero es que el anotador sea estilo truco donde cada 5 puntos se forma un cuadrado con 4 lados y una diagonal en el medio, es decir que cada punto extra va sumando lado, lado, lado, lado, diagonal y ahi pasa al otro.

Te sumo como quiero que se vea aprox

Voy a modificar el c√≥digo para que se parezca m√°s a la imagen y tenga el sistema de anotaci√≥n tradicional del truco con palitos y diagonales.

Untitled
Artefacto interactivo 
Untitled
Artefacto interactivo‚ÄÇ‚àô‚ÄÇVersi√≥n 8 
Ahora voy a actualizar el HTML para que tenga la estructura de dos columnas:

Untitled
Artefacto interactivo‚ÄÇ‚àô‚ÄÇVersi√≥n 9 
Ahora voy a actualizar el JavaScript para que funcione con el sistema tradicional de palitos del truco (cada 5 puntos completa un cuadrado con diagonal):

Untitled
Artefacto interactivo‚ÄÇ‚àô‚ÄÇVersi√≥n 10 
Perfecto! He actualizado el anotador de truco con los siguientes cambios:

Dise√±o visual:

Layout de dos columnas (Nosotros vs Ellos)
Botones + y - debajo de cada √°rea de palitos
Dise√±o m√°s limpio y espacioso similar a la imagen
Sistema de palitos tradicional del truco:

Cada cuadrado representa 5 puntos
Los puntos se van agregando formando: lado izquierdo ‚Üí lado superior ‚Üí lado derecho ‚Üí lado inferior ‚Üí diagonal
Los primeros 15 puntos se marcan en rojo
Los siguientes 15 puntos (16-30) se marcan en verde
Total: 6 cuadrados completos = 30 puntos
Ahora cuando hagas click en + ir√°s viendo c√≥mo se va formando cada cuadrado l√≠nea por l√≠nea, exactamente como en el truco tradicional argentino! üßâ

Necesito el c√≥digo entero

Anotador de Truco
Artefacto interactivo‚ÄÇ‚àô‚ÄÇVersi√≥n 11 
¬°Listo! Ah√≠ ten√©s el c√≥digo completo del anotador de truco.

Caracter√≠sticas principales:

‚úÖ Layout de dos columnas (Nosotros vs Ellos)
‚úÖ Sistema tradicional de palitos del truco (cada 5 puntos forma un cuadrado con diagonal)
‚úÖ Primeros 15 puntos en rojo, siguientes 15 en verde
‚úÖ Botones + y - para cada equipo
‚úÖ Bot√≥n de reiniciar
‚úÖ Dise√±o responsive y adaptado a mobile
Pod√©s copiar todo el c√≥digo y usarlo directamente. Cada vez que sumes puntos, vas a ver c√≥mo se van formando los palitos tradicionales del truco argentino! üÉèüßâ

3 cosas a corregir:
1. No hace falta que diga "Nosotros vs Ellos ¬∑ 30 tantos"
2. Veo que no funciona lo de los cuadrados, directamente reemplazemoslo por dos contadores num√©ricos que tengan el n√∫mero en grande para cada equipo y listo, lo permite hacer m√°s compacto encima

Untitled
Artefacto interactivo‚ÄÇ‚àô‚ÄÇVersi√≥n 12 
Untitled
Artefacto interactivo‚ÄÇ‚àô‚ÄÇVersi√≥n 15 
¬°Listo! He corregido las 3 cosas:

‚úÖ Elimin√© el texto "Nosotros vs Ellos ¬∑ 30 tantos"
‚úÖ Reemplac√© los cuadrados de palitos por contadores num√©ricos grandes y simples
‚úÖ El dise√±o ahora es mucho m√°s compacto y limpio
Ahora ten√©s un anotador minimalista con n√∫meros grandes bien visibles para llevar el puntaje del truco de forma simple y clara! üéØ


Contexto general Quiero que desarrolles una web para jugar ‚ÄúEl Impostor‚Äù entre amigos usando un solo celular. Todos los jugadores est√°n f√≠sicamente juntos. Se usa un √∫nico tel√©fono, que se va pasando de mano en mano. La web solo se usa para: Configurar la partida. Mostrar los roles/palabras de

pasted

Perfecto, ahora mis c√≥digos de la homey del anotador de truco son los que paso.
Quiero avanzar con el juego de Impostor.

Perfecto, entiendo que quer√©s desarrollar el juego "El Impostor" para jugar entre amigos con un solo celular. Voy a crear la estructura completa del juego siguiendo las reglas que especificaste.

Voy a empezar con la pantalla de inicio y luego iremos construyendo el resto del flujo:

El Impostor - Juego
Artefacto interactivo 

Contexto general Quiero que desarrolles una web para jugar ‚ÄúEl Impostor‚Äù entre amigos usando un solo celular. Todos los jugadores est√°n f√≠sicamente juntos. Se usa un √∫nico tel√©fono, que se va pasando de mano en mano. La web solo se usa para: Configurar la partida. Mostrar los roles/palabras de

pasted


index.html
280 l√≠neas

html


truco.html
328 l√≠neas

html

Perfecto, entiendo que quer√©s desarrollar el juego "El Impostor" para jugar entre amigos con un solo celular. Voy a crear la estructura completa del juego siguiendo las reglas que especificaste.
Voy a empezar con la pantalla de inicio y luego iremos construyendo el resto del flujo:

¬°Perfecto! Voy a crear el juego completo de "El Impostor" siguiendo tu documento de especificaciones y manteniendo el estilo visual de Carpincho Games.

El Impostor - Juego
Artefacto interactivo‚ÄÇ‚àô‚ÄÇVersi√≥n 2 
erikoterochio/carpincho-games
main

GITHUB

Quiero modificar el archivo del impostor

Esa parte de la p√°gina lo que hace es permitir a los jugadores jugar al juego "El impostor" con un solo celular.

Los principales cambios para hacer:
1. El color del fondo tiene que ser el mismo que en la p√°gina de inicio
2. La primera pantalla del impostor tiene que ser la tarjeta conteniendo:
   1. Titulo
   2. Boton de <- Inicio
   3. Sacar texto "Un solo celu, todos sospechan." (En todos lados donde aparezca)
   4. Sacar subtitulo "¬øQu√© hacemos?"
   5. Dejar "Usen un solo celular. La app se ocupa de la palabra, los roles, el orden y la votaci√≥n." Pero ponerle un salto de l√≠nea
   6. Dejar botones de C√≥mo se juega y Jugar
3. En la secci√≥n ¬øC√≥mo se juega? los textos ponerlos hacia la izquierda (queda mucho espacio en entre el n√∫mero y el texto)
4. En la configuraci√≥n de partida
   1. Hacer los botones para elegir un poco m√°s grandes (as√≠ es m√°s facil de usar en el celu)
   2. Permitir hasta 15 jugadores m√°ximo
   3. Eliminar la opci√≥n de "Palabra personalizada", siempre tiene que ser de una de las categor√≠as y palabras dadas por la p√°gina
   4. No deber√≠an existir "Rondas", deber√≠a permitir "Jugar otra" al terminar una, dejando la √∫ltima configuraci√≥n que se uso en ese celu (se borra la info en un lapso de 2 horas, por si quieren jugar varias las mismas personas, pero deber√≠a permitirle configurar siempre al empezar cada ronda por si alguien se va o suma)
   5. Las vueltas de pistas deber√≠an permitirse hasta un m√°ximo de 3
   6. El modo de votaci√≥n es siempre "Abierta" asi que no pongamos ese desplegable (y borremos las l√≥gicas para cuando el m√©todo de votaci√≥n era en el celu)
   7. Sumar una opci√≥n para decir cu√°nto tiempo va a durar la votaci√≥n
5. Para las rondas:
   1. Los textos de Pas√° el celu a ... tienen que ser un poco m√°s grande
   2. Elimina el texto "Solo esa persona debe mirar la pantalla. Cuando est√© listo, toquen ‚ÄúMostrar‚Äù."
   3. El boton de "Mostrar" ponelo a "Mostrar palabra"
   4. No deber√≠a ponerse lo de el rol de cada uno, saquemoslo
   5. S√≥lo mostrar la palabra de cada persona y si no tiene palabra porque es impostor poner con el mismo formato pero con la letra en rojo "IMPOSTOR"
   6. Sacar los clicks y pasos de "ya dijo la palabra", una vez que se le dio la palabra a cada persona que hay aun boton de iniciar que diga qui√©n tiene que empezar la ronda diciendo una palabra (el resto va en orden hacia la derecha)
   7. Cuando todos terminaron de decir su palabra deber√≠a haber un boton de "Empezar votaci√≥n"
   8. Luego de eso, deber√≠a empezar el timer seg√∫n el tiempo configurado de votaci√≥n para esa partida
   9. Cuando termina el timer deber√≠a aparecer una opci√≥n para elegir de toda la lista de jugadores qui√©n fue el elegido y ah√≠ decir cu√°l era su rol si Ciudadano o Impostor
   10. Si no se eliminaron a todos los impostores deber√≠a seguir la pr√≥xima vuelta (si es que se defini√≥ jugar m√°s de una), vuelve a empezar a hablar el anterior (si se elimino el de su derecha)
   11. La ronda termina cuando se eliminaron todos los impostores (o impostor) o si se terminaron las vueltas
6. Finalmente deber√≠a decir jugar otra ronda y que permita tres opciones:
   1. Repetir todo (configuraci√≥n, jugadores y tema)
   2. Repetir todo pero solo cambiar tema
   3. Hacer cambios a la configuraci√≥n (misma pantalla del inicio ser√≠a)

Mostrar m√°s
<function_calls> <invoke name="artifacts"> <parameter name="command">update</parameter> <parameter name="id">impostor-game</parameter> <parameter name="new_str"> document.getElementById('word-category').addEventListener('change', (e) => { const customGroup = document.getElementById('custom-word-group'); customGroup.style.display = e.target.value === 'custom' ? 'block' : 'none'; }); });

// Iniciar juego
function startGame() {
  const playerCount = parseInt(document.getElementById('player-count').value);
  gameState.players = [];
  
  for (let i = 0; i < playerCount; i++) {
    const name = document.getElementById(`player-${i}`).value.trim() || `Jugador ${i + 1}`;
    gameState.players.push(name);
    gameState.scores[name] = 0;
  }
  
  gameState.impostorCount = parseInt(document.getElementById('impostor-count').value);
  gameState.totalRounds = parseInt(document.getElementById('round-count').value);
  gameState.wordCategory = document.getElementById('word-category').value;
  gameState.customWord = document.getElementById('custom-word').value;
  gameState.voteMode = document.getElementById('vote-mode').value;
  gameState.currentRound = 1;
  
  showScreen('screen-role-intro');
}

// Iniciar asignaci√≥n de roles
function startRoleAssignment() {
  assignRoles();
  gameState.currentPlayerIndex = 0;
  showPassPhoneScreen();
}

// Asignar roles y palabra
function assignRoles() {
  // Elegir palabra
  if (gameState.wordCategory === 'custom') {
    gameState.word = gameState.customWord;
  } else {
    const words = wordBank[gameState.wordCategory];
    gameState.word = words[Math.floor(Math.random() * words.length)];
  }
  
  // Asignar roles aleatoriamente
  gameState.roles = new Array(gameState.players.length).fill('citizen');
  const impostorIndices = [];
  
  while (impostorIndices.length < gameState.impostorCount) {
    const idx = Math.floor(Math.random() * gameState.players.length);
    if (!impostorIndices.includes(idx)) {
      impostorIndices.push(idx);
      gameState.roles[idx] = 'impostor';
    }
  }
}

// Mostrar pantalla de pasar celular
function showPassPhoneScreen() {
  const playerName = gameState.players[gameState.currentPlayerIndex];
  document.getElementById('current-player-name').textContent = playerName;
  document.getElementById('pass-phone-text').textContent = `Ahora mira ${playerName}`;
  showScreen('screen-pass-phone');
}

// Mostrar rol del jugador
function showRole() {
  const role = gameState.roles[gameState.currentPlayerIndex];
  const roleCard = document.getElementById('role-card');
  const roleTitle = document.getElementById('role-title');
  const roleContent = document.getElementById('role-content');
  const roleHint = document.getElementById('role-hint');
  
  if (role === 'citizen') {
    roleCard.className = 'role-card citizen';
    roleTitle.textContent = 'CIUDADANO';
    roleContent.innerHTML = `<div class="secret-word">${gameState.word}</div>`;
    roleHint.textContent = 'Record√° la palabra y da pistas para encontrar al impostor.';
  } else {
    roleCard.className = 'role-card impostor';
    roleTitle.textContent = 'IMPOSTOR';
    roleContent.innerHTML = '<p style="font-size:1.1rem;margin:16px 0;">No conoc√©s la palabra.</p>';
    roleHint.textContent = 'Trat√° de disimular. Escuch√° las pistas de los dem√°s para deducir la palabra.';
  }
  
  showScreen('screen-show-role');
}

// Ocultar rol
function hideRole() {
  showScreen('screen-role-hidden');
}

// Siguiente jugador
function nextPlayer() {
  gameState.currentPlayerIndex++;
  
  if (gameState.currentPlayerIndex < gameState.players.length) {
    showPassPhoneScreen();
  } else {
    startCluePhase();
  }
}

// Iniciar fase de pistas
function startCluePhase() {
  gameState.currentClueIndex = 0;
  updateClueScreen();
  showScreen('screen-clues');
}

// Actualizar pantalla de pistas
function updateClueScreen() {
  document.getElementById('current-round-display').textContent = gameState.currentRound;
  document.getElementById('total-rounds-display').textContent = gameState.totalRounds;
  document.getElementById('current-clue-player').textContent = gameState.players[gameState.currentClueIndex];
  
  const list = document.getElementById('clue-player-list');
  list.innerHTML = '';
  
  gameState.players.forEach((player, idx) => {
    const item = document.createElement('div');
    item.className = 'player-item';
    if (idx === gameState.currentClueIndex) {
      item.classList.add('active');
    }
    item.innerHTML = `
      <span class="player-name">${player}</span>
      <span class="player-number">${idx === gameState.currentClueIndex ? '‚Üê Turno actual' : ''}</span>
    `;
    list.appendChild(item);
  });
}

// Siguiente pista
function nextClue() {
  gameState.currentClueIndex++;
  
  if (gameState.currentClueIndex < gameState.players.length) {
    updateClueScreen();
  } else {
    startDiscussion();
  }
}

// Iniciar discusi√≥n
function startDiscussion() {
  showScreen('screen-discussion');
  startDiscussionTimer();
}

// Timer de discusi√≥n
function startDiscussionTimer() {
  let timeLeft = gameState.discussionTime;
  const timerEl = document.getElementById('discussion-timer');
  
  if (discussionTimer) clearInterval(discussionTimer);
  
  discussionTimer = setInterval(() => {
    timeLeft--;
    const mins = Math.floor(timeLeft / 60);
    const secs = timeLeft % 60;
    timerEl.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    
    if (timeLeft <= 0) {
      clearInterval(discussionTimer);
      startVoting();
    }
  }, 1000);
}

// Iniciar votaci√≥n
function startVoting() {
  if (discussionTimer) clearInterval(discussionTimer);
  gameState.votes = [];
  gameState.currentPlayerIndex = 0;
  
  if (gameState.voteMode === 'secret') {
    showVotePassScreen();
  } else {
    showOpenVote();
  }
}

// Mostrar pantalla de pasar celular para votar
function showVotePassScreen() {
  document.getElementById('vote-player-name').textContent = gameState.players[gameState.currentPlayerIndex];
  showScreen('screen-vote-pass');
}

// Mostrar votaci√≥n
function showVote() {
  const container = document.getElementById('vote-buttons');
  container.innerHTML = '';
  
  gameState.players.forEach((player, idx) => {
    if (idx !== gameState.currentPlayerIndex) { // No puede votarse a s√≠ mismo
      const btn = document.createElement('button');
      btn.className = 'vote-btn';
      btn.textContent = player;
      btn.onclick = () => castVote(idx);
      container.appendChild(btn);
    }
  });
  
  showScreen('screen-vote-secret');
}

// Emitir voto
function castVote(votedIndex) {
  gameState.votes.push(votedIndex);
  showScreen('screen-vote-saved');
}

// Siguiente votante
function nextVoter() {
  gameState.currentPlayerIndex++;
  
  if (gameState.currentPlayerIndex < gameState.players.length) {
    showVotePassScreen();
  } else {
    calculateResults();
  }
}

// Votaci√≥n abierta
function showOpenVote() {
  const container = document.getElementById('vote-buttons-open');
  container.innerHTML = '';
  
  gameState.players.forEach((player, idx) => {
    const btn = document.createElement('button');
    btn.className = 'vote-btn';
    btn.textContent = player;
    btn.onclick = () => {
      gameState.votes = [idx]; // Solo un voto en modo abierto
      calculateResults();
    };
    container.appendChild(btn);
  });
  
  showScreen('screen-vote-open');
}

// Calcular resultados
function calculateResults() {
  // Contar votos
  const voteCounts = {};
  gameState.votes.forEach(voteIdx => {
    voteCounts[voteIdx] = (voteCounts[voteIdx] || 0) + 1;
  });
  
  // Encontrar m√°s votado
  let maxVotes = 0;
  let mostVotedIdx = 0;
  
  for (const [idx, count] of Object.entries(voteCounts)) {
    if (count > maxVotes) {
      maxVotes = count;
      mostVotedIdx = parseInt(idx);
    }
  }
  
  // Actualizar puntos
  const votedPlayerRole = gameState.roles[mostVotedIdx];
  
  if (votedPlayerRole === 'impostor') {
    // Atraparon al impostor - ganan ciudadanos
    gameState.players.forEach((player, idx) => {
      if (gameState.roles[idx] === 'citizen') {
        if (gameState.voteMode === 'secret' && gameState.votes[idx] === mostVotedIdx) {
          gameState.scores[player] += 1; // Punto por votar correctamente
        } else if (gameState.voteMode === 'open') {
          gameState.scores[player] += 1;
        }
      }
    });
  } else {
    // NO atraparon al impostor - ganan impostores
    gameState.players.forEach((player, idx) => {
      if (gameState.roles[idx] === 'impostor') {
        gameState.scores[player] += 2;
      }
    });
  }
  
  showResults(mostVotedIdx);
}

// Mostrar resultados
function showResults(votedIdx) {
  document.getElementById('result-round-display').textContent = gameState.currentRound;
  document.getElementById('result-total-rounds').textContent = gameState.totalRounds;
  document.getElementById('voted-player-name').textContent = gameState.players[votedIdx];
  
  const role = gameState.roles[votedIdx];
  const roleText = role === 'impostor' ? 'IMPOSTOR' : 'CIUDADANO';
  const roleColor = role === 'impostor' ? 'var(--pink)' : 'var(--sky)';
  document.getElementById('voted-player-role').innerHTML = `Rol: <span style="color:${roleColor};">${roleText}</span>`;
  
  // Mostrar marcador
  const scoreboard = document.getElementById('round-scoreboard');
  scoreboard.innerHTML = '<h3 style="text-align:center;margin-bottom:12px;color:var(--indigo);">Puntos Acumulados</h3>';
  
  const sortedPlayers = [...gameState.players].sort((a, b) => gameState.scores[b] - gameState.scores[a]);
  
  sortedPlayers.forEach(player => {
    const item = document.createElement('div');
    item.className = 'score-item';
    item.innerHTML = `
      <span class="score-name">${player}</span>
      <span class="score-points">${gameState.scores[player]}</span>
    `;
    scoreboard.appendChild(item);
  });
  
  showScreen('screen-results');
}

// Mostrar todos los roles
function showAllRoles() {
  const list = document.getElementById('all-roles-list');
  list.innerHTML = '';
  
  gameState.players.forEach((player, idx) => {
    const role = gameState.roles[idx];
    const roleText = role === 'impostor' ? 'üé≠ IMPOSTOR' : 'üë§ CIUDADANO';
    const roleColor = role === 'impostor' ? 'var(--pink)' : 'var(--sky)';
    
    const item = document.createElement('div');
    item.className = 'player-item';
    item.innerHTML = `
      <span class="player-name">${player}</span>
      <span style="color:${roleColor};font-weight:600;">${roleText}</span>
    `;
    list.appendChild(item);
  });
  
  showScreen('screen-all-roles');
}

// Siguiente ronda
function nextRound() {
  gameState.currentRound++;
  
  if (gameState.currentRound > gameState.totalRounds) {
    showFinalResults();
  } else {
    startRoleAssignment();
  }
}

// Mostrar resultados finales
function showFinalResults() {
  const scoreboard = document.getElementById('final-scoreboard');
  scoreboard.innerHTML = '';
  
  const sortedPlayers = [...gameState.players].sort((a, b) => gameState.scores[b] - gameState.scores[a]);
  
  sortedPlayers.forEach((player, idx) => {
    const item = document.createElement('div');
    item.className = 'score-item';
    if (idx === 0) item.classList.add('highlight');
    
    item.innerHTML = `
      <div>
        <span class="score-name">${idx === 0 ? 'üèÜ ' : ''}${player}</span>
      </div>
      <span class="score-points">${gameState.scores[player]}</span>
    `;
    scoreboard.appendChild(item);
  });
  
  showScreen('screen-final');
}

// Jugar de nuevo
function playAgain() {
  // Resetear puntos
  Object.keys(gameState.scores).forEach(key => {
    gameState.scores[key] = 0;
  });
  gameState.currentRound = 1;
  startRoleAssignment();
}
</script> </body> </html></parameter> <parameter name="old_str"> document.getElementById('word-category').addEventListener('change', (e) => { const customGroup = document.getElementById('custom-word-group'); customGroup.style.display = e.target.value === 'custom' ? 'block'</parameter>
Dame el c√≥digo entero


Orchestrated comprehensive code restructuring with multiple feature enhancements.


El Impostor - Juego Completo
Artefacto interactivo‚ÄÇ‚àô‚ÄÇVersi√≥n 3 
¬°Listo! Te he entregado el c√≥digo completo del juego "El Impostor" con todos los cambios que pediste:

Cambios implementados:

‚úÖ Fondo oscuro igual que la p√°gina de inicio
‚úÖ Primera pantalla mejorada (sin subt√≠tulos innecesarios)
‚úÖ Instrucciones con mejor alineaci√≥n
‚úÖ Configuraci√≥n optimizada:
Botones m√°s grandes para usar en celular
Hasta 15 jugadores
Sin opci√≥n de palabra personalizada
Sin sistema de rondas (solo "jugar otra")
Hasta 3 vueltas de pistas
Solo votaci√≥n abierta
Tiempo de votaci√≥n configurable (30s a 2min)
‚úÖ Flujo de juego mejorado:
Textos m√°s grandes para "Pas√° el celular"
Solo muestra palabra o "IMPOSTOR" en rojo
Bot√≥n de iniciar pistas despu√©s de dar palabras
Timer de discusi√≥n antes de votar
Sistema de eliminaci√≥n con continuaci√≥n
Ronda termina cuando se eliminan todos los impostores o se acaban las vueltas
‚úÖ Opciones al finalizar:
Repetir todo igual
Cambiar solo categor√≠a
Modificar configuraci√≥n completa
El c√≥digo est√° listo para copiar y usar. Guarda la configuraci√≥n en localStorage por 2 horas para facilitar jugar varias rondas seguidas con los mismos jugadores! üéÆ

Perfecto, algunas cosas a corregir:
1. Si se hab√≠a empezado a poner los nombres de jugadores y luego se cambia el numero que no se borre lo ya escrito (ej: inicialmente estaba para 3, cuando puse al jugador a, b y c decido cambiar a 4 jugadores, bueno que queden a, b y c, pero que aparezca el espacio para el 4to)
2. Siempre el n√∫mero de "Vueltas de pistas" es 1; lo que puede cambiar es cu√°ntas rondas (o votaciones, o eliminaciones) se van a ejecutar
3. El juego termina cuando se eliminan a todos los impostores o se terminan las rondas (lo que suceda primero)
4. Quien empieza diciendo la primera palabra debe ser elegido de forma aleatoria (luego continua en orden)
5. Si la persona que arranc√≥ la primera ronda no fue eliminada, vuelve a empezar, sino el que iba despu√©s de √©l arranca la pr√≥xima ronda

Pasarme el c√≥digo completo por favor

Mostrar m√°s

Restructur√≥ mec√°nicas de juego y l√≥gica de turnos.


El Impostor - Juego Completo
Artefacto interactivo‚ÄÇ‚àô‚ÄÇVersi√≥n 4 
¬°Perfecto! Te he entregado el c√≥digo completo con todas las correcciones:

Cambios implementados:

‚úÖ Nombres conservados: Al cambiar el n√∫mero de jugadores, los nombres ya escritos se mantienen
‚úÖ Rondas m√°ximas: Cambi√© "Vueltas de pistas" por "Rondas m√°ximas" - siempre es 1 vuelta de pistas, pero m√∫ltiples rondas de eliminaci√≥n
‚úÖ Condiciones de fin: El juego termina cuando se eliminan todos los impostores O se alcanzan las rondas m√°ximas configuradas
‚úÖ Primer jugador aleatorio: Al iniciar el juego, se elige aleatoriamente qui√©n empieza
‚úÖ Continuidad del primer jugador: Si el jugador que arranc√≥ sigue vivo, vuelve a empezar la siguiente ronda; si fue eliminado, arranca el siguiente jugador vivo
El juego ahora funciona correctamente con el sistema de rondas de eliminaci√≥n y mantiene la configuraci√≥n guardada en localStorage por 2 horas. ¬°Listo para jugar! üéÆ


<!DOCTYPE html> <html lang="es"> <head> <meta charset="UTF-8" /> <title>El Impostor ¬∑ Carpincho Games</title> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> <style> :root { --bg: #0A092C; --pink: #FF6B6B; --

pasted

Hice este c√≥digo pero quiero hacer dos cambios:
1. Ajustar todo el c√≥digo para considerar que la constante wordbank fue modificada para agregar m√°s cosas
2. Haya una opci√≥n para que la categor√≠a sea aleatoria si as√≠ se desea (te tiene que decir qu√© categor√≠a es la palabra el iniciar para guiar un poco al impostor)


5 pasos

Reformul√≥ la funci√≥n para integrar categor√≠as expandidas.


Prepar√≥ reescritura completa del c√≥digo actualizado.

El Impostor - Juego Completo
Artefacto interactivo‚ÄÇ‚àô‚ÄÇVersi√≥n 11 
¬°Perfecto! He actualizado el c√≥digo completo con los dos cambios:

Cambios implementados:

‚úÖ WordBank actualizado: Ahora incluye todas las nuevas categor√≠as con sus palabras:
Deportes
Pel√≠culas y Series
Objetos
Lugares
Personalidades
Cocina
Animales
M√∫sica
Tecnolog√≠a
‚úÖ Categor√≠a Aleatoria:
Nueva opci√≥n "Aleatoria" (es la opci√≥n por defecto)
Cuando se elige, la app selecciona una categor√≠a al azar al iniciar cada ronda
Se muestra la categor√≠a elegida en la pantalla "Iniciar Pistas" con el texto "Categor√≠a: [nombre]"
Esto ayuda al impostor a tener una gu√≠a sobre qu√© tipo de palabras esperar
Los nombres se muestran de forma amigable (ej: "Pel√≠culas y Series" en lugar de "peliculasSeries")
El c√≥digo est√° completo y listo para usar. La categor√≠a aleatoria hace el juego m√°s din√°mico y el indicador de categor√≠a ayuda a que el impostor tenga una mejor experiencia! üéÆ

Ahora quiero que armemos la p√°gina del d√≠galo con m√≠mica.
Cosas a tener en cuenta:
1. Mantner la est√©tica de index e impostor
2. Primera p√°gina tiene que permitir configurar el juego
   1. Cu√°ntos equipos, por default 2
   2. Tiempo para hacer la m√≠mica
   3. Cu√°ntas rondas se van a jugar (campo de escritura libre, s√≥lo n√∫meros) o a cu√°ntos puntos
3. Despu√©s tiene que estar la parte donde se le da la pelicula a la persona y luego comienza a contabilizar el tiempo
4. El anotador de puntos por equipo
5. Inclu√≠ al menos 100 peliculas o series para empezar a tener una buena base, intent√° que las pel√≠culas no sean m√°s viejas que 1970 y que haya cosas de referencia a Argentina

Mostrar m√°s

Dise√±√≥ estructura completa con configuraci√≥n, juego y base de pel√≠culas.




D√≠galo con M√≠mica - Juego
Artefacto interactivo 
¬°Perfecto! He creado el juego completo de "D√≠galo con M√≠mica" con todas las caracter√≠sticas que pediste:

Caracter√≠sticas implementadas:

‚úÖ Est√©tica coherente: Mantiene el dise√±o de index e impostor (fondo oscuro, tarjetas blancas, tipograf√≠a consistente)
‚úÖ Configuraci√≥n completa:
N√∫mero de equipos (2-6, default 2)
Tiempo por turno (30s a 2min, default 1min)
Dos modos: Por rondas O hasta X puntos
‚úÖ Flujo de juego:
Pantalla de preparaci√≥n para cada turno
Mostrar pel√≠cula solo a quien act√∫a
Cron√≥metro con cambios de color (naranja en 10s, rojo en 5s, con animaci√≥n)
Botones de "¬°Adivinaron!" y "No adivinaron"
‚úÖ Sistema de puntos:
Marcador actualizado despu√©s de cada turno
Resalta el equipo que est√° jugando
Pantalla de ganador con ranking final
‚úÖ Base de datos: M√°s de 120 pel√≠culas y series incluyendo:
Pel√≠culas argentinas (El secreto de sus ojos, Relatos salvajes, etc.)
Series argentinas (Casados con hijos, Los Simuladores, etc.)
Cl√°sicos internacionales desde 1970
Blockbusters modernos
Series populares internacionales
El sistema no repite pel√≠culas hasta agotar todo el banco. Color principal: rosa/pink para diferenciarlo del impostor. ¬°Listo para jugar! üé¨üé≠








<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>D√≠galo con M√≠mica ¬∑ Carpincho Games</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <style>
    :root {
      --bg: #0A092C;
      --pink: #FF6B6B;
      --blue: #335C81;
      --indigo: #1B2845;
      --sky: #5899E2;
      --card: #ffffff;
      --text: #1B2845;
      --muted: #6b7280;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: var(--bg);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .app {
      width: 100%;
      max-width: 480px;
      background: var(--card);
      border-radius: 18px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(0, 0, 0, 0.03);
      padding: 14px 14px 12px;
      border: 1px solid rgba(27, 40, 69, 0.1);
    }

    .screen {
      display: none;
    }

    .screen.active {
      display: block;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 12px;
    }

    .title-group h1 {
      font-size: 1.35rem;
      font-weight: 700;
      color: var(--indigo);
    }

    .back-link {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--indigo);
      text-decoration: none;
      border-radius: 999px;
      border: 1px solid rgba(51, 92, 129, 0.3);
      padding: 6px 14px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      background: #ffffff;
      white-space: nowrap;
    }

    .back-link:hover {
      background: #f9f9f9;
      border-color: var(--blue);
    }

    .content {
      background: #f8f9fa;
      border-radius: 16px;
      padding: 20px 16px;
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    .intro-text {
      font-size: 0.9rem;
      line-height: 1.6;
      color: var(--text);
      margin-bottom: 20px;
    }

    .btn {
      width: 100%;
      padding: 14px 20px;
      border-radius: 12px;
      border: none;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s ease;
      touch-action: manipulation;
    }

    .btn-primary {
      background: var(--pink);
      color: #ffffff;
      border: 2px solid var(--pink);
    }

    .btn-primary:hover {
      background: #ff5252;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
    }

    .btn-secondary {
      background: #ffffff;
      color: var(--indigo);
      border: 2px solid rgba(51, 92, 129, 0.3);
    }

    .btn-secondary:hover {
      background: #f9f9f9;
      border-color: var(--blue);
    }

    .btn:active {
      transform: scale(0.98);
    }

    .btn-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-group label {
      display: block;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--indigo);
      margin-bottom: 8px;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 12px 14px;
      border: 2px solid rgba(148, 163, 184, 0.3);
      border-radius: 10px;
      font-size: 1rem;
      background: #ffffff;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--pink);
    }

    .inline-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .movie-card {
      background: #ffffff;
      border-radius: 16px;
      padding: 40px 24px;
      text-align: center;
      border: 4px solid var(--pink);
      margin: 20px 0;
      box-shadow: 0 4px 12px rgba(255, 107, 107, 0.2);
    }

    .movie-title {
      font-size: 2rem;
      font-weight: 700;
      color: var(--indigo);
      line-height: 1.3;
      margin: 16px 0;
    }

    .timer {
      font-size: 4rem;
      font-weight: 700;
      text-align: center;
      color: var(--pink);
      margin: 24px 0;
      font-variant-numeric: tabular-nums;
    }

    .timer.warning {
      color: #f59e0b;
      animation: pulse 1s infinite;
    }

    .timer.critical {
      color: #ef4444;
      animation: pulse 0.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .scoreboard {
      margin: 20px 0;
    }

    .team-score {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background: #ffffff;
      border-radius: 12px;
      margin-bottom: 12px;
      border: 2px solid rgba(148, 163, 184, 0.3);
    }

    .team-score.active {
      border-color: var(--pink);
      background: #fff1f2;
    }

    .team-name {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--indigo);
    }

    .team-points {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--pink);
      font-variant-numeric: tabular-nums;
    }

    .score-controls {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .score-btn {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: 2px solid rgba(148, 163, 184, 0.3);
      background: #ffffff;
      font-size: 1.2rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .score-btn:hover {
      transform: scale(1.05);
    }

    .score-btn.plus {
      background: var(--pink);
      color: #ffffff;
      border-color: var(--pink);
    }

    .info-text {
      font-size: 1.15rem;
      line-height: 1.6;
      text-align: center;
      color: var(--text);
      margin-bottom: 20px;
    }

    .info-text.large {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--indigo);
    }

    .winner-box {
      background: linear-gradient(135deg, #fff1f2 0%, #ffe4e6 100%);
      border-radius: 16px;
      padding: 32px 24px;
      text-align: center;
      border: 4px solid var(--pink);
      margin: 20px 0;
    }

    .winner-box h2 {
      font-size: 1.8rem;
      color: var(--pink);
      margin-bottom: 16px;
    }

    .winner-box .team-name {
      font-size: 2.2rem;
      color: var(--indigo);
    }

    footer {
      margin-top: 12px;
      font-size: 0.75rem;
      color: var(--muted);
      text-align: center;
    }

    @media (max-width: 480px) {
      body {
        padding: 10px;
      }

      .app {
        padding: 12px 10px 10px;
      }

      .movie-title {
        font-size: 1.6rem;
      }

      .timer {
        font-size: 3rem;
      }
    }
  </style>
</head>
<body>
  <main class="app">
    <!-- PANTALLA 1: INICIO -->
    <div class="screen active" id="screen-home">
      <header>
        <div class="title-group">
          <h1>D√≠galo con M√≠mica</h1>
        </div>
        <a href="index.html" class="back-link">‚Üê Inicio</a>
      </header>

      <div class="content">
        <p class="intro-text">
          Actu√° pel√≠culas y series sin hablar.<br>
          ¬°Que tu equipo adivine antes de que se acabe el tiempo!
        </p>
        
        <div class="btn-group">
          <button class="btn btn-primary" onclick="showScreen('screen-setup')">Jugar</button>
        </div>
      </div>
    </div>

    <!-- PANTALLA 2: CONFIGURACI√ìN -->
    <div class="screen" id="screen-setup">
      <header>
        <div class="title-group">
          <h1>Configurar Juego</h1>
        </div>
        <button class="back-link" onclick="showScreen('screen-home')" style="border:none;background:transparent;cursor:pointer;">‚Üê Volver</button>
      </header>

      <div class="content">
        <form id="setup-form" onsubmit="startGame(event)">
          <div class="inline-group">
            <div class="form-group">
              <label>Equipos</label>
              <select id="team-count">
                <option value="2" selected>2 equipos</option>
                <option value="3">3 equipos</option>
                <option value="4">4 equipos</option>
                <option value="5">5 equipos</option>
                <option value="6">6 equipos</option>
              </select>
            </div>

            <div class="form-group">
              <label>Tiempo por turno</label>
              <select id="time-limit">
                <option value="30">30 seg</option>
                <option value="45">45 seg</option>
                <option value="60" selected>1 min</option>
                <option value="90">1:30 min</option>
                <option value="120">2 min</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>Modo de juego</label>
            <select id="game-mode" onchange="toggleGameMode()">
              <option value="rounds" selected>Por rondas</option>
              <option value="points">Hasta X puntos</option>
            </select>
          </div>

          <div class="form-group" id="rounds-group">
            <label>N√∫mero de rondas</label>
            <input type="number" id="rounds-count" min="1" max="20" value="5" />
          </div>

          <div class="form-group" id="points-group" style="display:none;">
            <label>Puntos para ganar</label>
            <input type="number" id="points-goal" min="1" max="50" value="15" />
          </div>

          <div class="btn-group">
            <button type="submit" class="btn btn-primary">Empezar Juego</button>
          </div>
        </form>
      </div>
    </div>

    <!-- PANTALLA 3: PREPARAR TURNO -->
    <div class="screen" id="screen-prepare">
      <header>
        <div class="title-group">
          <h1>Turno del <span id="current-team-name">Equipo 1</span></h1>
        </div>
      </header>

      <div class="content">
        <p class="info-text">
          <span id="prepare-info">Ronda 1 de 5</span>
        </p>
        <p class="info-text large">¬øListos?</p>
        <p class="intro-text">
          Solo la persona que va a actuar debe tocar "Mostrar pel√≠cula".<br>
          Luego actu√° sin hablar mientras tu equipo intenta adivinar.
        </p>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="showMovie()">Mostrar pel√≠cula</button>
        </div>
      </div>
    </div>

    <!-- PANTALLA 4: MOSTRAR PEL√çCULA -->
    <div class="screen" id="screen-movie">
      <header>
        <div class="title-group">
          <h1>Tu pel√≠cula es...</h1>
        </div>
      </header>

      <div class="content">
        <div class="movie-card">
          <div class="movie-title" id="movie-title">T√≠tulo de Pel√≠cula</div>
        </div>

        <p class="intro-text">Memoriz√° el t√≠tulo y empez√° a actuar cuando toques "Iniciar"</p>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="startTimer()">Iniciar Cron√≥metro</button>
        </div>
      </div>
    </div>

    <!-- PANTALLA 5: JUGANDO (CON CRON√ìMETRO) -->
    <div class="screen" id="screen-playing">
      <header>
        <div class="title-group">
          <h1 id="playing-team-name">Equipo 1</h1>
        </div>
      </header>

      <div class="content">
        <div class="timer" id="timer">01:00</div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="stopTimer(true)">¬°Adivinaron!</button>
          <button class="btn btn-secondary" onclick="stopTimer(false)">No adivinaron</button>
        </div>
      </div>
    </div>

    <!-- PANTALLA 6: MARCADOR -->
    <div class="screen" id="screen-scoreboard">
      <header>
        <div class="title-group">
          <h1>Marcador</h1>
        </div>
      </header>

      <div class="content">
        <p class="info-text" id="score-info">Ronda 1 de 5</p>

        <div class="scoreboard" id="scoreboard-list">
          <!-- Los equipos se agregan din√°micamente -->
        </div>

        <div class="btn-group">
          <button class="btn btn-primary" onclick="nextTurn()">Siguiente Turno</button>
        </div>
      </div>
    </div>

    <!-- PANTALLA 7: GANADOR -->
    <div class="screen" id="screen-winner">
      <header>
        <div class="title-group">
          <h1>¬°Fin del Juego!</h1>
        </div>
      </header>

      <div class="content">
        <div class="winner-box">
          <h2>üèÜ Ganador</h2>
          <div class="team-name" id="winner-name">Equipo 1</div>
          <p style="margin-top:16px;font-size:1.2rem;color:var(--muted);">
            <span id="winner-points">10</span> puntos
          </p>
        </div>

        <div class="scoreboard" id="final-scoreboard">
          <!-- Marcador final -->
        </div>

        <div class="btn-group" style="margin-top:20px;">
          <button class="btn btn-primary" onclick="playAgain()">Jugar de nuevo</button>
          <button class="btn btn-secondary" onclick="showScreen('screen-home')">Volver al inicio</button>
        </div>
      </div>
    </div>

    <footer>
      <span>Carpincho Games ¬∑ D√≠galo con M√≠mica</span>
    </footer>
  </main>

  <script>
    // Estado del juego
    const gameState = {
      teamCount: 2,
      teams: [],
      timeLimit: 60,
      gameMode: 'rounds',
      roundsCount: 5,
      pointsGoal: 15,
      currentRound: 1,
      currentTeam: 0,
      currentMovie: '',
      usedMovies: []
    };

    // Base de datos de pel√≠culas y series
    const movies = [
      // Pel√≠culas argentinas
      'El secreto de sus ojos', 'Relatos salvajes', 'Nueve Reinas', 'El hijo de la novia', 'La historia oficial',
      'Camila', 'La Patagonia rebelde', 'Tiempo de valientes', 'Un cuento chino', 'Esperando la carroza',
      'El clan', 'La noche de los l√°pices', 'La tregua', 'Plata dulce', 'Pizza, birra, faso', 'Metegol', 'Manuelita'
      
      // Series argentinas
      'Casados con hijos', 'Los Simuladores', 'Okupas', 'El Marginal', 'Clave de sol', 'El sodero de mi vida', 'El puntero', 'Envidiosa', 'Un pap√° genial',
      'El hijo de la novia', 'Los mios, los tuyos y los nuestros', 'Cebollitas', 
      
      // Pel√≠culas cl√°sicas internacionales (1970-1989)
      'Star Wars', 'El Padrino', 'Rocky', 'Tibur√≥n', 'Alien', 'Terminator', 'E.T.', 
      'Volver al futuro', 'Los Cazafantasmas', 'Indiana Jones', 'Top Gun', 'Rambo', 'Cuidado beb√© suelto',
      'La guerra de las galaxias', 'Superman', 'Batman', 'Scarface', 'Amadeus', 'El exorcista', 'La historia sin fin',
      
      // Pel√≠culas 1990s
      'Titanic', 'Matrix', 'Forrest Gump', 'El rey le√≥n', 'Toy Story', 'Jurassic Park', 'Cementerio de animales', 
      'Tiempos violentos', 'El silencio de los inocentes', 'Jumanji', 'La m√°scara', 'El quinto elemento',
      'Duro de matar', 'M√°xima velocidad', 'Misi√≥n imposible', 'D√≠a de la independencia', 'Godzilla',
      'Gladiador', 'El sexto sentido', 'Belleza americana', 'Belleza americana', 'Un ratoncito duro de cazar',
      
      // Pel√≠culas 2000s
      'El se√±or de los anillos', 'Harry Potter', 'Piratas del Caribe', 'Spider-Man', 'Hombres de negro', 
      'Shrek', 'Buscando a Nemo', 'Los incre√≠bles', 'Batman inicia', 'El caballero oscuro', 'El se√±or de los anillos: las dos torres',
      'El incre√≠ble Hulk', 'Arriba en el cielo', 'La casa de los gritos', 
      'Los vengadores', 'El origen', 'Interestelar', 'Django sin cadenas', 'El amanecer de los muertos', 
      
      // Pel√≠culas 2010s-2020s
      'Frozen', 'Intensa-mente', 'Coco', 'Toy Story 4', 'Joker', 'Par√°sitos', 'Godzilla', 'King kong', 'N√°ufrago', 
      '1917', 'Mad Max Furia en el camino', 'La purga', 'Realmente amor', 'Cuestion de tiempo', 'La terminal',
      'El gran pez', 'Pantera negra', 'La guerra de los mundos', 'Coco', 'Encanto', 'La isla', 'Atr√°pame si puedes', 
      
      // M√°s pel√≠culas variadas
      'La vida es bella', 'El pianista', 'Gran Torino', 'El club de la pelea', 'Invicto', 'Cisne negro',
      'El discurso del rey', 'La teor√≠a del todo', 'El c√≥digo enigma', 'Sue√±os de libertad', 
      'Steve Jobs', 'La red social', 'El lobo de Wall Street', 'Los chicos malos', 'R√°pidos y furiosos', 
      'D√≠a de la independencia', 'Contacto', 'Gravity', 'Marte',
      'Duna', 'La llegada', 'B√∫squeda implacable', 'Contactos cercanos del tercer tipo', 'Desapareci√≥ una noche',
      'La sirenita', 'El gran truco', 'El ilusionista', 'El alquimista', 'El joven manos de tijera', 'Calabozos y dragones', 
   ];

    let timerInterval = null;
    let timeLeft = 0;

    // Alternar modo de juego
    function toggleGameMode() {
      const mode = document.getElementById('game-mode').value;
      document.getElementById('rounds-group').style.display = mode === 'rounds' ? 'block' : 'none';
      document.getElementById('points-group').style.display = mode === 'points' ? 'block' : 'none';
    }

    // Navegaci√≥n entre pantallas
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(screenId).classList.add('active');
    }

    // Iniciar juego
    function startGame(event) {
      event.preventDefault();
      
      gameState.teamCount = parseInt(document.getElementById('team-count').value);
      gameState.timeLimit = parseInt(document.getElementById('time-limit').value);
      gameState.gameMode = document.getElementById('game-mode').value;
      gameState.roundsCount = parseInt(document.getElementById('rounds-count').value);
      gameState.pointsGoal = parseInt(document.getElementById('points-goal').value);
      
      // Inicializar equipos
      gameState.teams = [];
      for (let i = 0; i < gameState.teamCount; i++) {
        gameState.teams.push({
          name: `Equipo ${i + 1}`,
          points: 0
        });
      }
      
      gameState.currentRound = 1;
      gameState.currentTeam = 0;
      gameState.usedMovies = [];
      
      showPrepareTurn();
    }

    // Mostrar pantalla de preparaci√≥n
    function showPrepareTurn() {
      document.getElementById('current-team-name').textContent = gameState.teams[gameState.currentTeam].name;
      
      if (gameState.gameMode === 'rounds') {
        const totalTurns = gameState.roundsCount * gameState.teamCount;
        const currentTurn = (gameState.currentRound - 1) * gameState.teamCount + gameState.currentTeam + 1;
        document.getElementById('prepare-info').textContent = `Turno ${currentTurn} de ${totalTurns}`;
      } else {
        document.getElementById('prepare-info').textContent = `Jugando hasta ${gameState.pointsGoal} puntos`;
      }
      
      showScreen('screen-prepare');
    }

    // Elegir pel√≠cula aleatoria
    function getRandomMovie() {
      const availableMovies = movies.filter(m => !gameState.usedMovies.includes(m));
      
      if (availableMovies.length === 0) {
        gameState.usedMovies = [];
        return movies[Math.floor(Math.random() * movies.length)];
      }
      
      const movie = availableMovies[Math.floor(Math.random() * availableMovies.length)];
      gameState.usedMovies.push(movie);
      return movie;
    }

    // Mostrar pel√≠cula
    function showMovie() {
      gameState.currentMovie = getRandomMovie();
      document.getElementById('movie-title').textContent = gameState.currentMovie;
      showScreen('screen-movie');
    }

    // Iniciar cron√≥metro
    function startTimer() {
      timeLeft = gameState.timeLimit;
      updateTimerDisplay();
      document.getElementById('playing-team-name').textContent = gameState.teams[gameState.currentTeam].name;
      showScreen('screen-playing');
      
      if (timerInterval) clearInterval(timerInterval);
      
      timerInterval = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();
        
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          stopTimer(false);
        }
      }, 1000);
    }

    // Actualizar visualizaci√≥n del cron√≥metro
    function updateTimerDisplay() {
      const timerEl = document.getElementById('timer');
      const mins = Math.floor(timeLeft / 60);
      const secs = timeLeft % 60;
      timerEl.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      
      // Cambiar color seg√∫n tiempo restante
      timerEl.className = 'timer';
      if (timeLeft <= 10 && timeLeft > 5) {
        timerEl.classList.add('warning');
      } else if (timeLeft <= 5) {
        timerEl.classList.add('critical');
      }
    }

    // Detener cron√≥metro
    function stopTimer(correct) {
      if (timerInterval) clearInterval(timerInterval);
      
      if (correct) {
        gameState.teams[gameState.currentTeam].points++;
      }
      
      showScoreboard();
    }

    // Mostrar marcador
    function showScoreboard() {
      if (gameState.gameMode === 'rounds') {
        const totalTurns = gameState.roundsCount * gameState.teamCount;
        const currentTurn = (gameState.currentRound - 1) * gameState.teamCount + gameState.currentTeam + 1;
        document.getElementById('score-info').textContent = `Turno ${currentTurn} de ${totalTurns}`;
      } else {
        document.getElementById('score-info').textContent = `Jugando hasta ${gameState.pointsGoal} puntos`;
      }
      
      const scoreboard = document.getElementById('scoreboard-list');
      scoreboard.innerHTML = '';
      
      gameState.teams.forEach((team, index) => {
        const teamDiv = document.createElement('div');
        teamDiv.className = 'team-score';
        if (index === gameState.currentTeam) {
          teamDiv.classList.add('active');
        }
        teamDiv.innerHTML = `
          <span class="team-name">${team.name}</span>
          <span class="team-points">${team.points}</span>
        `;
        scoreboard.appendChild(teamDiv);
      });
      
      showScreen('screen-scoreboard');
    }

    // Siguiente turno
    function nextTurn() {
      // Verificar si alguien gan√≥ (modo puntos)
      if (gameState.gameMode === 'points') {
        const winner = gameState.teams.find(t => t.points >= gameState.pointsGoal);
        if (winner) {
          showWinner();
          return;
        }
      }
      
      gameState.currentTeam++;
      
      if (gameState.currentTeam >= gameState.teamCount) {
        gameState.currentTeam = 0;
        gameState.currentRound++;
        
        // Verificar si terminaron las rondas (modo rondas)
        if (gameState.gameMode === 'rounds' && gameState.currentRound > gameState.roundsCount) {
          showWinner();
          return;
        }
      }
      
      showPrepareTurn();
    }

    // Mostrar ganador
    function showWinner() {
      // Encontrar equipo con m√°s puntos
      let winnerTeam = gameState.teams[0];
      gameState.teams.forEach(team => {
        if (team.points > winnerTeam.points) {
          winnerTeam = team;
        }
      });
      
      document.getElementById('winner-name').textContent = winnerTeam.name;
      document.getElementById('winner-points').textContent = winnerTeam.points;
      
      // Mostrar marcador final ordenado
      const finalScoreboard = document.getElementById('final-scoreboard');
      finalScoreboard.innerHTML = '';
      
      const sortedTeams = [...gameState.teams].sort((a, b) => b.points - a.points);
      sortedTeams.forEach(team => {
        const teamDiv = document.createElement('div');
        teamDiv.className = 'team-score';
        teamDiv.innerHTML = `
          <span class="team-name">${team.name}</span>
          <span class="team-points">${team.points}</span>
        `;
        finalScoreboard.appendChild(teamDiv);
      });
      
      showScreen('screen-winner');
    }

    // Jugar de nuevo
    function playAgain() {
      showScreen('screen-setup');
    }

    // Inicializaci√≥n
    document.addEventListener('DOMContentLoaded', () => {
      toggleGameMode();
    });
  </script>
</body>
</html>
