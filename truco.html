<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Anotador de Truco ¬∑ Carpincho Games</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #020617;
      --card: #0f172a;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.15);
      --danger: #f97373;
      --text: #f9fafb;
      --muted: #9ca3af;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #111827 0, #020617 65%);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .app {
      width: 100%;
      max-width: 520px;
      background: rgba(15, 23, 42, 0.96);
      border-radius: 20px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      box-shadow:
        0 20px 40px rgba(15, 23, 42, 0.8),
        0 0 0 1px rgba(15, 23, 42, 0.9);
      padding: 20px 18px;
      backdrop-filter: blur(18px);
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .title-group h1 {
      font-size: 1.1rem;
    }

    .title-group span {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .back-link {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
      text-decoration: none;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      padding: 5px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .back-link:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .scoreboard {
      margin-top: 6px;
      background: linear-gradient(145deg, #020617, #020617 40%, #0b1120);
      border-radius: 16px;
      padding: 14px;
      border: 1px solid rgba(148, 163, 184, 0.45);
    }

    .teams {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-bottom: 14px;
    }

    .team {
      background: radial-gradient(circle at top, rgba(34, 197, 94, 0.08), transparent),
        rgba(15, 23, 42, 0.9);
      border-radius: 12px;
      padding: 10px 10px 9px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .team-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
    }

    .team-name {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
    }

    .score {
      font-size: 1.7rem;
      font-variant-numeric: tabular-nums;
    }

    .score.max {
      color: var(--accent);
      text-shadow: 0 0 18px rgba(34, 197, 94, 0.7);
    }

    .points-target {
      font-size: 0.7rem;
      color: var(--muted);
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-top: 6px;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 0.78rem;
      cursor: pointer;
      background: rgba(15, 23, 42, 0.9);
      color: var(--text);
      border: 1px solid rgba(148, 163, 184, 0.7);
      transition:
        transform 0.1s ease-out,
        box-shadow 0.1s ease-out,
        border-color 0.1s ease-out,
        background 0.1s ease-out;
    }

    button span {
      font-size: 0.8rem;
      opacity: 0.85;
    }

    button:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow: 0 10px 18px rgba(15, 23, 42, 0.7);
      border-color: var(--accent);
      background: rgba(22, 163, 74, 0.18);
    }

    button:disabled {
      opacity: 0.4;
      cursor: default;
    }

    .btn-main {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      border-color: transparent;
      color: #022c22;
      font-weight: 600;
    }

    .btn-main:hover:not(:disabled) {
      background: linear-gradient(135deg, #4ade80, #22c55e);
      box-shadow:
        0 10px 20px rgba(21, 128, 61, 0.7),
        0 0 0 1px rgba(22, 163, 74, 0.5);
    }

    .btn-danger {
      border-color: rgba(248, 113, 113, 0.7);
      color: #fecaca;
    }

    .btn-danger:hover:not(:disabled) {
      background: rgba(248, 113, 113, 0.12);
      box-shadow: 0 8px 15px rgba(127, 29, 29, 0.7);
    }

    .controls {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: space-between;
      align-items: center;
    }

    .target-select {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.75rem;
      color: var(--muted);
    }

    select {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      color: var(--text);
      font-size: 0.75rem;
      padding: 4px 10px;
      cursor: pointer;
    }

    .history {
      margin-top: 14px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.8);
      border: 1px dashed rgba(148, 163, 184, 0.6);
      padding: 10px;
      max-height: 150px;
      overflow-y: auto;
    }

    .history-title {
      font-size: 0.75rem;
      color: var(--muted);
      margin-bottom: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .history-list {
      list-style: none;
      font-size: 0.75rem;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .history-list li span {
      color: var(--muted);
    }

    .winner-banner {
      margin-top: 8px;
      font-size: 0.8rem;
      padding: 6px 10px;
      border-radius: 10px;
      background: rgba(34, 197, 94, 0.18);
      border: 1px solid rgba(34, 197, 94, 0.7);
      color: var(--accent);
      display: none;
      align-items: center;
      gap: 6px;
    }

    .winner-banner.show {
      display: inline-flex;
    }

    .winner-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 0 4px var(--accent-soft);
    }

    footer {
      margin-top: 12px;
      font-size: 0.7rem;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }

    @media (max-width: 480px) {
      .app {
        padding: 18px 14px;
      }

      .teams {
        grid-template-columns: 1fr;
      }

      .scoreboard {
        padding: 12px;
      }
    }
  </style>
</head>
<body>
  <main class="app">
    <header>
      <div class="title-group">
        <h1>Anotador de Truco</h1>
        <span>Sum√° puntos sin discutir el tanteador.</span>
      </div>
      <a href="index.html" class="back-link">
        ‚Üê Volver
      </a>
    </header>

    <section class="scoreboard">
      <div class="teams">
        <div class="team" data-team="A">
          <div class="team-header">
            <span class="team-name">Nosotros</span>
            <span class="score" id="scoreA">0</span>
          </div>
          <span class="points-target" id="targetLabelA">A&nbsp;30&nbsp;tantos</span>
          <div class="buttons">
            <button class="btn-main" onclick="addPoints('A', 1)">+1</button>
            <button onclick="addPoints('A', 2)">+2</button>
            <button onclick="addPoints('A', 3)">+3</button>
            <button onclick="addPoints('A', -1)"><span>-1 (corregir)</span></button>
          </div>
        </div>

        <div class="team" data-team="B">
          <div class="team-header">
            <span class="team-name">Ellos</span>
            <span class="score" id="scoreB">0</span>
          </div>
          <span class="points-target" id="targetLabelB">A&nbsp;30&nbsp;tantos</span>
          <div class="buttons">
            <button class="btn-main" onclick="addPoints('B', 1)">+1</button>
            <button onclick="addPoints('B', 2)">+2</button>
            <button onclick="addPoints('B', 3)">+3</button>
            <button onclick="addPoints('B', -1)"><span>-1 (corregir)</span></button>
          </div>
        </div>
      </div>

      <div class="controls">
        <div class="target-select">
          <span>Partida a:</span>
          <select id="targetSelect" onchange="changeTarget()">
            <option value="15">15 tantos</option>
            <option value="30" selected>30 tantos</option>
            <option value="40">40 tantos</option>
          </select>
        </div>
        <div style="display: flex; gap: 6px; flex-wrap: wrap;">
          <button class="btn-danger" onclick="undoLast()">Deshacer √∫ltima</button>
          <button class="btn-danger" onclick="resetScores()">Reiniciar</button>
        </div>
      </div>

      <div class="winner-banner" id="winnerBanner">
        <span class="winner-dot"></span>
        <span id="winnerText"></span>
      </div>

      <div class="history">
        <div class="history-title">
          <span>Historial de manos</span>
          <button style="font-size: 0.7rem; padding: 2px 8px;" onclick="clearHistory()">Limpiar</button>
        </div>
        <ul class="history-list" id="historyList"></ul>
      </div>
    </section>

    <footer>
      <span>Carpincho Games ¬∑ Truco</span>
      <span>Tip: usalo desde el celu en la mesa.</span>
    </footer>
  </main>

  <script>
    let scoreA = 0;
    let scoreB = 0;
    let target = 30;
    const history = [];

    function updateUI() {
      const scoreAEl = document.getElementById("scoreA");
      const scoreBEl = document.getElementById("scoreB");
      const winnerBanner = document.getElementById("winnerBanner");
      const winnerText = document.getElementById("winnerText");
      const historyList = document.getElementById("historyList");
      const targetLabelA = document.getElementById("targetLabelA");
      const targetLabelB = document.getElementById("targetLabelB");

      scoreAEl.textContent = scoreA;
      scoreBEl.textContent = scoreB;

      scoreAEl.classList.toggle("max", scoreA >= target);
      scoreBEl.classList.toggle("max", scoreB >= target);

      targetLabelA.textContent = `A ${target} tantos`;
      targetLabelB.textContent = `A ${target} tantos`;

      // ganador
      const winner =
        scoreA >= target
          ? "Nosotros"
          : scoreB >= target
          ? "Ellos"
          : null;

      if (winner) {
        winnerBanner.classList.add("show");
        winnerText.textContent = `${winner} llegaron al score üéâ`;
      } else {
        winnerBanner.classList.remove("show");
        winnerText.textContent = "";
      }

      // historial
      historyList.innerHTML = "";
      history
        .slice()
        .reverse()
        .forEach((entry, index) => {
          const li = document.createElement("li");
          li.textContent = `${entry.team === "A" ? "Nosotros" : "Ellos"}: ${
            entry.delta > 0 ? "+" : ""
          }${entry.delta} (‚Üí ${entry.newScore})`;
          historyList.appendChild(li);
        });
    }

    function addPoints(team, delta) {
      if (delta === 0) return;

      if (team === "A") {
        const newScore = Math.max(0, scoreA + delta);
        history.push({ team: "A", delta, newScore });
        scoreA = newScore;
      } else {
        const newScore = Math.max(0, scoreB + delta);
        history.push({ team: "B", delta, newScore });
        scoreB = newScore;
      }

      updateUI();
    }

    function resetScores() {
      scoreA = 0;
      scoreB = 0;
      updateUI();
    }

    function undoLast() {
      const last = history.pop();
      if (!last) return;

      if (last.team === "A") {
        scoreA = history.filter((h) => h.team === "A").pop()?.newScore ?? 0;
      } else {
        scoreB = history.filter((h) => h.team === "B").pop()?.newScore ?? 0;
      }

      updateUI();
    }

    function clearHistory() {
      history.length = 0;
      updateUI();
    }

    function changeTarget() {
      const select = document.getElementById("targetSelect");
      target = parseInt(select.value, 10) || 30;
      updateUI();
    }

    // init
    updateUI();
  </script>
</body>
</html>
